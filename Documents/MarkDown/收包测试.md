# netmap 收包测试

使用之前需要关闭流控制功能并开启混淆模式

```s
sudo ethtool -A ethX autoneg off rx off tx off
sudo ifconfig ethX promisc
```

使用 `pkt-gen` 工具可以调用 netmap 进行收包测试。命令如下：

```s
sudo pkt-gen -i ethX -f tx
参数 -d IP ，只接受来自 IP 的包
```

发包的机器（clients）需要注意 arp 列表中是否包含 netmap 所接管端口的 mac IP 映射关系。
如果没有， netmap 会在若干秒之后接收不到数据包。因此需要手动添加，命令如下

```s
sudo arp -s [IP addr] [mac addr]
```
